var acts = [
{
	"naam" : "Paardrijden bij 'de Bonte Stal'",
	"deelnemers" : ["avatar1.jpg", "avatar2.jpg", "avatar3.jpg", "avatar4.jpg"],
	"punten" : 220
},
{
	"naam" : "Wekelijks hardlopen op woensdag",
	"deelnemers" : ["avatar2.jpg", "avatar5.jpg"],
	"punten" : 200
},
{
	"naam" : "Wandelen langs de Broeckse plassen",
	"deelnemers" : ["avatar11.jpg", "avatar6.jpg", "avatar8.jpg", "avatar10.jpg", "avatar4.jpg", "avatar2.jpg"],
	"punten" : 78
},
{
	"naam" : "Tour de Wijchen",
	"deelnemers" : ["avatar1.jpg", "avatar3.jpg", "avatar10.jpg", "avatar9.jpg", "avatar6.jpg", "avatar3.jpg"],
	"punten" : 210
},
{
	"naam" : "Waterpolo voor 6",
	"deelnemers" : ["avatar1.jpg", "avatar5.jpg", "avatar7.jpg", "avatar10.jpg", "avatar4.jpg", "avatar3.jpg"],
	"punten" : 110
},
{
	"naam" : "Hockeyen voor het goede doel",
	"deelnemers" : ["avatar8.jpg", "avatar9.jpg"],
	"punten" : 24
},
{
	"naam" : "Wijchens badminton toernooi",
	"deelnemers" : ["avatar1.jpg", "avatar2.jpg", "avatar3.jpg", "avatar4.jpg"],
	"punten" : 10
},
{
	"naam" : "Roeien op de Broeckse plas",
	"deelnemers" : ["avatar7.jpg", "avatar6.jpg"],
	"punten" : 44
},
{
	"naam" : "Wekelijks hardlopen op zaterdag",
	"deelnemers" : ["avatar10.jpg", "avatar5.jpg", "avatar11.jpg"],
	"punten" : 210
},
{
	"naam" : "Mountainbiken met Henk",
	"deelnemers" : ["avatar6.jpg", "avatar3.jpg"],
	"punten" : 12
},
{
	"naam" : "Zwemmen met Sanne",
	"deelnemers" : ["avatar1.jpg", "avatar3.jpg", "avatar10.jpg", "avatar9.jpg", "avatar6.jpg"],
	"punten" : 100
},
{
	"naam" : "Wekelijks hardlopen op woensdag",
	"deelnemers" : ["avatar2.jpg", "avatar5.jpg"],
	"punten" : 78
},
{
	"naam" : "Paardrijden bij 'de Bonte Stal'",
	"deelnemers" : ["avatar1.jpg", "avatar2.jpg", "avatar3.jpg", "avatar4.jpg"],
	"punten" : 120
},
{
	"naam" : "Wekelijks hardlopen op woensdag",
	"deelnemers" : ["avatar2.jpg", "avatar5.jpg"],
	"punten" : 200
},
{
	"naam" : "Wandelen langs de Broeckse plassen",
	"deelnemers" : ["avatar11.jpg", "avatar6.jpg", "avatar8.jpg", "avatar10.jpg", "avatar4.jpg", "avatar2.jpg"],
	"punten" : 78
},
{
	"naam" : "Tour de Wijchen",
	"deelnemers" : ["avatar1.jpg", "avatar3.jpg", "avatar10.jpg", "avatar9.jpg", "avatar6.jpg", "avatar3.jpg"],
	"punten" : 210
},
{
	"naam" : "Waterpolo voor 6",
	"deelnemers" : ["avatar1.jpg", "avatar5.jpg", "avatar7.jpg", "avatar10.jpg", "avatar4.jpg", "avatar3.jpg"],
	"punten" : 110
},
{
	"naam" : "Hockeyen voor het goede doel",
	"deelnemers" : ["avatar8.jpg", "avatar9.jpg"],
	"punten" : 24
},
{
	"naam" : "Wijchens badminton toernooi",
	"deelnemers" : ["avatar1.jpg", "avatar2.jpg", "avatar3.jpg", "avatar4.jpg"],
	"punten" : 10
},
{
	"naam" : "Roeien op de Broeckse plas",
	"deelnemers" : ["avatar7.jpg", "avatar6.jpg"],
	"punten" : 44
},
{
	"naam" : "Wekelijks hardlopen op zaterdag",
	"deelnemers" : ["avatar10.jpg", "avatar5.jpg", "avatar11.jpg"],
	"punten" : 210
},
{
	"naam" : "Mountainbiken met Henk",
	"deelnemers" : ["avatar6.jpg", "avatar3.jpg"],
	"punten" : 12
},
{
	"naam" : "Zwemmen met Sanne",
	"deelnemers" : ["avatar1.jpg", "avatar3.jpg", "avatar10.jpg", "avatar9.jpg", "avatar6.jpg"],
	"punten" : 100
},
{
	"naam" : "Wekelijks hardlopen op woensdag",
	"deelnemers" : ["avatar2.jpg", "avatar5.jpg"],
	"punten" : 78
},
{
	"naam" : "Paardrijden bij 'de Bonte Stal'",
	"deelnemers" : ["avatar1.jpg", "avatar2.jpg", "avatar3.jpg", "avatar4.jpg"],
	"punten" : 120
},
{
	"naam" : "Wekelijks hardlopen op woensdag",
	"deelnemers" : ["avatar2.jpg", "avatar5.jpg"],
	"punten" : 200
},
{
	"naam" : "Wandelen langs de Broeckse plassen",
	"deelnemers" : ["avatar11.jpg", "avatar6.jpg", "avatar8.jpg", "avatar10.jpg", "avatar4.jpg", "avatar2.jpg"],
	"punten" : 78
},
{
	"naam" : "Tour de Wijchen",
	"deelnemers" : ["avatar1.jpg", "avatar3.jpg", "avatar10.jpg", "avatar9.jpg", "avatar6.jpg", "avatar3.jpg"],
	"punten" : 210
},
{
	"naam" : "Waterpolo voor 6",
	"deelnemers" : ["avatar1.jpg", "avatar5.jpg", "avatar7.jpg", "avatar10.jpg", "avatar4.jpg", "avatar3.jpg"],
	"punten" : 110
},
{
	"naam" : "Hockeyen voor het goede doel",
	"deelnemers" : ["avatar8.jpg", "avatar9.jpg"],
	"punten" : 24
},
{
	"naam" : "Wijchens badminton toernooi",
	"deelnemers" : ["avatar1.jpg", "avatar2.jpg", "avatar3.jpg", "avatar4.jpg"],
	"punten" : 10
},
{
	"naam" : "Roeien op de Broeckse plas",
	"deelnemers" : ["avatar7.jpg", "avatar6.jpg"],
	"punten" : 44
},
{
	"naam" : "Wekelijks hardlopen op zaterdag",
	"deelnemers" : ["avatar10.jpg", "avatar5.jpg", "avatar11.jpg"],
	"punten" : 210
},
{
	"naam" : "Mountainbiken met Henk",
	"deelnemers" : ["avatar6.jpg", "avatar3.jpg"],
	"punten" : 12
},
{
	"naam" : "Zwemmen met Sanne",
	"deelnemers" : ["avatar1.jpg", "avatar3.jpg", "avatar10.jpg", "avatar9.jpg", "avatar6.jpg"],
	"punten" : 100
},
{
	"naam" : "Wekelijks hardlopen op woensdag",
	"deelnemers" : ["avatar2.jpg", "avatar5.jpg"],
	"punten" : 78
}
],
tussenstand = 0,
meterBreedte = 1196,
meterStand = 0,
meterVol = 11960,
huidigeAct = -1,
meter,
meterTekst,
activiteitTekst,
messageBox;

window.onload = function () {
	var vulElementen = function () {
		meter = document.getElementById("pointer");
		meterTekst = document.getElementsByTagName("h4")[0];
		activiteitTekst = document.getElementsByTagName("h2")[0];
		deelnemers = document.getElementById("deelnemers");
	}
	vulElementen();
	setUpdateTijd();
}

var setMeter = function (getal) {
	var oudeGetal = tussenstand - ((acts[huidigeAct].punten / meterVol) * meterBreedte),
	nieuweGetal = getal,
	i = 0;
	var setWidth = function () {
		if (oudeGetal < nieuweGetal) {
			oudeGetal += 1;
			meter.style.width = oudeGetal + "px";
		} else {
			console.log(tussenstand);
			clearInterval(x);
		}
	}
	var x = setInterval(function () {
		setWidth();
	}, 50);
}

var setActiviteitTekst = function (tekst) {
	activiteitTekst.textContent = "Activiteit afgerond: " + tekst + "!";
}

var setMeterTekst = function (getal) {
	var oudeGetal = meterStand - acts[huidigeAct].punten,
	nieuweGetal = meterStand,
	i = 0;
	var setWidth = function () {
		if (oudeGetal < nieuweGetal) {
			oudeGetal += 1;
			meterTekst.textContent = oudeGetal + " / " + meterVol;
		} else {
			clearInterval(x);
		}
	}
	var x = setInterval(function () {
		setWidth();
	}, 10);
}

var setDeelnemers = function () {
	var activiteitDeelnemers = document.getElementsByClassName("deelnemer"), i;
	while (deelnemers.hasChildNodes()) {
    	deelnemers.removeChild(deelnemers.lastChild);
	}
	var img;
	for (i = 0; i < acts[huidigeAct].deelnemers.length; i += 1) {
		img = document.createElement("img");
		img.setAttribute("class", "deelnemer");
		img.setAttribute("src", "./img/" + acts[huidigeAct].deelnemers[i]);
		deelnemers.appendChild(img);
	}
}

var bepaalHuidigeAct = function () {
	if ((huidigeAct + 1) < acts.length) {
		return huidigeAct + 1;
	} else {
		return 0;
	}
}

var bepaalMeterStand = function () {
	if (meterStand === meterVol) {
		tussenstand = 0;
		return 0;
	} else {
		if ((meterStand + acts[huidigeAct].punten) < meterVol) {
			tussenstand = ((meterStand + acts[huidigeAct].punten) / meterVol) * meterBreedte;
			return meterStand + acts[huidigeAct].punten;
		} else {
			tussenstand = meterBreedte;
			return meterVol;
		}
	}
}

var updateMeter = function () {
	huidigeAct = bepaalHuidigeAct();
	meterStand = bepaalMeterStand();
	setMeter(tussenstand);
	setMeterTekst(meterStand);
	setDeelnemers();
	setActiviteitTekst(acts[huidigeAct].naam);
}

var setUpdateTijd = function () {
	setInterval(function () {
		updateMeter();
	}, 5000);
}

